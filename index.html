<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<title>Traductor Idioma Secreto ↔ Español</title>
<style>
  body { font-family: Arial, sans-serif; max-width: 700px; margin: 20px auto; }
  textarea, select, input { width: 100%; padding: 8px; margin: 6px 0; box-sizing: border-box; }
  button { padding: 10px 15px; margin-top: 10px; cursor: pointer; }
  #resultado { background: #eee; padding: 10px; min-height: 40px; white-space: pre-wrap; }
  .section { margin-bottom: 30px; }
</style>

<!-- PWA manifest -->
<link rel="manifest" href="manifest.json" />
<meta name="theme-color" content="#317EFB"/>

<script>
  // Registrar Service Worker para cache offline PWA
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('service-worker.js')
        .then(reg => console.log('Service Worker registrado', reg))
        .catch(err => console.warn('Service Worker error', err));
    });
  }
</script>

</head>
<body>

<h1>Traductor Idioma Secreto ↔ Español</h1>

<div class="section">
  <label for="direccion">Dirección de traducción:</label>
  <select id="direccion">
    <option value="secreto-es">Idioma Secreto → Español</option>
    <option value="es-secreto">Español → Idioma Secreto</option>
  </select>
</div>

<div class="section">
  <label for="inputFrase">Escribe la frase:</label>
  <textarea id="inputFrase" rows="3" placeholder="Ejemplo: na beva nai"></textarea>
  <button onclick="traducir()">Traducir</button>
  <div id="resultado"></div>
</div>

<script>
// Diccionarios básicos (todo en minúsculas)
const diccionario = {
  "hola": "hala",
  "adios": "baiya",
  "amor": "lavi",
  "amistad": "pelia",
  "feliz": "mira",
  "triste": "soro",
  "enojado": "fira",
  "cansado": "lomu",
  "bien": "zeno",
  "mal": "doro",
  "mucho": "muni",
  "poco": "minu",
  "aqui": "aka",
  "alli": "ala",
  "hoy": "suno",
  "mañana": "manu",
  "ayer": "year",
  "siempre": "sempa",
  "nunca": "nuka",
  "ahora": "nawa",
  "gracias": "dron",
  "por favor": "plisa",
  "lesbiana": "leska",
  "gay": "gali",

  "si": "da",
  "no": "ne",
  "y": "ka",
  "pero": "su",
  "porque": "preho",
  "qué": "ke",
  "quién": "ku",
  "dónde": "do",
  "cuando": "wen",
  "cómo": "kom",

  "agua": "nai",
  "comida": "fuk",
  "casa": "dom",
  "amigo": "pel",
  "dia": "sun",
  "noche": "luny",
  "calle": "stri",
  "dinero": "mon",
  "trabajo": "lob",
  "escuela": "skol",
  "tiempo": "ten",
  "mano": "han",
  "cosa": "tok",
  "ciudad": "cit",
  "auto": "kar",
  "sol": "soly",
  "luna": "luna",
  "mar": "mer",
  "montaña": "mona",
  "arbol": "tre",

  "yo": "na",
  "tu": "te",
  "tú": "te",
  "el": "lo",
  "ella": "lo",
  "nosotros": "ne",
  "nosotras": "ne",
  "ellos": "li",
  "ellas": "li",

  "comer": "vol",
  "ir": "dad",
  "ver": "fun",
  "hablar": "ser",
  "querer": "mar",
  "tener": "zel",
  "hacer": "kip",
  "saber": "ton",
  "pensar": "mir",
  "dormir": "sul",
  "beber": "bev",
  "vivir": "len",
  "correr": "ras",
  "esperar": "wai",
  "traer": "bor"
};

// Nueva palabra para agregar
const nuevasPalabras = {
  "mamaguebo": "maguvo",
  "loco": "loku",
  "guapo": "viro"
};
// Verbo "ser" con sus conjugaciones y traducciones personalizadas
const verboSer = {
  "soy": "na esa",
  "eres": "na ese",
  "es": "na ese",
  "somos": "na esamos",
  "son": "na eson",
  
  "fui": "na ese",
  "fuiste": "na esiste",
  "fue": "na esió",
  "fuimos": "na esimos",
  "fueron": "na esieron",
  
  "seré": "na esu",
  "serás": "na esás",
  "será": "na esá",
  "seremos": "na esemos",
  "serán": "na esán"
};
// Conjugaciones del verbo estar
const verboEstar = {
  "yo estoy": "na esta",
  "tú estás": "nu esta",
  "él está": "ne esta",
  "ella está": "ne esta",
  "nosotros estamos": "ni esta",
  "vosotros estáis": "no esta",
  "ellos están": "na esta",
  "yo estuve": "na este",
  "tú estuviste": "nu este",
  "él estuvo": "ne este",
  "ella estuvo": "ne este",
  "nosotros estuvimos": "ni este",
  "vosotros estuvisteis": "no este",
  "ellos estuvieron": "na este",
  "yo estaré": "na estu",
  "tú estarás": "nu estu",
  "él estará": "ne estu",
  "ella estará": "ne estu",
  "nosotros estaremos": "ni estu",
  "vosotros estaréis": "no estu",
  "ellos estarán": "na estu"
};  

// Mezclar con las palabras existentes
Object.assign(nuevasPalabras, verboSer);  

// Agregar la nueva palabra al diccionario original
Object.assign(diccionario, nuevasPalabras);

// Inverso: Idioma Secreto → Español
const diccionarioInverso = {};
for (const [esp, sec] of Object.entries(diccionario)) {
  diccionarioInverso[sec] = esp;
}

// Sufijos de conjugación verbo (idioma secreto)
const sufijos = {
  "a": "presente",
  "e": "pasado",
  "u": "futuro"
};

// Pronombres para conjugar
const pronombres = ["na", "te", "lo", "ne", "li"];
const pronombresEsp = ["yo", "tu", "el", "nosotros", "ellos"];

// Map pronombre español → idioma secreto (normalizado)
const pronombresMap = {
  "yo": "na",
  "tu": "te",
  "tú": "te",
  "el": "lo",
  "él": "lo",
  "ella": "lo",
  "nosotros": "ne",
  "nosotras": "ne",
  "ellos": "li",
  "ellas": "li"
};

// Verbos en español para detectar conjugaciones comunes
const verbosBase = {
  "comer": "vol",
  "ir": "dad",
  "ver": "fun",
  "hablar": "ser",
  "querer": "mar",
  "tener": "zel",
  "hacer": "kip",
  "saber": "ton",
  "pensar": "mir",
  "dormir": "sul",
  "beber": "bev",
  "vivir": "len",
  "correr": "ras",
  "esperar": "wai",
  "traer": "bor"
};

// Conjugaciones españolas para detección (simplificado)
const conjugacionesEsp = {
  "comer": [["como", "presente"], ["comes", "presente"], ["come", "presente"], ["comí", "pasado"], ["comiste", "pasado"], ["comió", "pasado"], ["comeré", "futuro"]],
  "beber": [["bebo", "presente"], ["bebes", "presente"], ["bebe", "presente"], ["bebí", "pasado"], ["bebiste", "pasado"], ["bebió", "pasado"], ["beberé", "futuro"]],
  "ir": [["voy", "presente"], ["vas", "presente"], ["va", "presente"], ["fui", "pasado"], ["fuiste", "pasado"], ["fue", "pasado"], ["iré", "futuro"]],
  "querer": [["quiero", "presente"], ["quieres", "presente"], ["quiere", "presente"], ["quise", "pasado"], ["quisiste", "pasado"], ["quiso", "pasado"], ["querré", "futuro"]],
  "hablar": [["hablo", "presente"], ["hablas", "presente"], ["habla", "presente"], ["hablé", "pasado"], ["hablaste", "pasado"], ["habló", "pasado"], ["hablaré", "futuro"]],
  // Añade más si quieres
};

// Detectar verbo conjugado español
function detectarVerboConjugado(palabra) {
  palabra = palabra.toLowerCase();
  for (const [base, lista] of Object.entries(conjugacionesEsp)) {
    for (const [conj, tiempo] of lista) {
      if (palabra === conj) return { base, tiempo };
    }
  }
  if (verbosBase[palabra]) {
    return { base: palabra, tiempo: "presente" };
  }
  return null;
}

// Español → Idioma Secreto
function traducirEspanolSecreto(texto) {
  const palabras = texto.toLowerCase().split(/\s+/);
  let resultado = [];
  for (let i = 0; i < palabras.length; i++) {
    let p = palabras[i];

    if (pronombresMap[p]) {
      resultado.push(pronombresMap[p]);
      continue;
    }

    const verboDetectado = detectarVerboConjugado(p);
    if (verboDetectado) {
      const verboSec = verbosBase[verboDetectado.base];
      const sufijo = Object.keys(sufijos).find(s => sufijos[s] === verboDetectado.tiempo) || "a";
      resultado.push(verboSec + sufijo);
      continue;
    }

    if (diccionario[p]) {
      resultado.push(diccionario[p]);
      continue;
    }

    resultado.push(`[${p}]`);
  }
  return resultado.join(" ");
}

// Idioma Secreto → Español
function traducirSecretoEspanol(texto) {
  const palabras = texto.toLowerCase().split(/\s+/);
  let resultado = [];

  for (let i = 0; i < palabras.length; i++) {
    const p = palabras[i];

    if (pronombres.includes(p)) {
      if (p === "lo") {
        resultado.push("el");
      } else {
        const idx = pronombres.indexOf(p);
        if (idx >= 0) resultado.push(pronombresEsp[idx]);
        else resultado.push(`[${p}]`);
      }
      continue;
    }

    if (p.length > 2) {
      const base = p.slice(0, -1);
      const sufijo = p.slice(-1);
      if (diccionarioInverso[base] && sufijos[sufijo]) {
        const verboEsp = diccionarioInverso[base];
        const tiempo = sufijos[sufijo];
        resultado.push(verboEsp + ` (${tiempo})`);
        continue;
      }
    }

    if (diccionarioInverso[p]) {
      resultado.push(diccionarioInverso[p]);
      continue;
    }

    resultado.push(`[${p}]`);
  }
  return resultado.join(" ");
}

function traducir() {
  const texto = document.getElementById("inputFrase").value.trim();
  const direccion = document.getElementById("direccion").value;
  if (!texto) {
    document.getElementById("resultado").textContent = "";
    return;
  }
  let resultado = "";
  if (direccion === "es-secreto") {
    resultado = traducirEspanolSecreto(texto);
  } else {
    resultado = traducirSecretoEspanol(texto);
  }
  document.getElementById("resultado").textContent = resultado;
}
</script>

</body>
</html>
